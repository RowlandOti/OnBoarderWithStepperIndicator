/*
 * Gets the version name from the latest Git tag
 * http://ryanharter.com/blog/2013/07/30/automatic-versioning-with-git-and-gradle/
 */
def getVersionName = { ->
    def stdout = new ByteArrayOutputStream()
    exec {
        commandLine 'git', 'describe', '--tags'
        standardOutput = stdout
    }
    return stdout.toString().trim()
}

publish {
    def propFile = file('../.buildsystem/.bintray/bintray.properties')
    if (propFile.exists()) {
        def props = new Properties()
        props.load(new FileInputStream(propFile))

        userOrg = props['BINTRAY_ORGANISATION']
        groupId = props['BINTRAY_GROUPID']
        artifactId = props['BINTRAY_ARTIFACTID']
        publishVersion = semverVersionPrefix("beta")
        desc = props['BINTRAY_DESC']
        website = props['BINTRAY_URL']
    }
}